document.addEventListener("DOMContentLoaded",()=>{const tasksList=document.querySelector(".tasks");let tasks=[];const savedTasks=localStorage.getItem("tasks");savedTasks&&(tasks=JSON.parse(savedTasks),tasks.forEach(task=>{tasksList.appendChild(createTaskElement(task))})),tasksList.addEventListener("click",event=>{const deleteButton=event.target.closest(".delete-btn");if(deleteButton){const taskContainer=deleteButton.closest(".task-container");if(taskContainer){const taskId=taskContainer.dataset.taskId;tasks=tasks.filter(task=>task.id!==taskId),taskContainer.classList.add("fade-out"),setTimeout(()=>{taskContainer.remove(),saveTasksToLocalStorage()},500)}}});const newTaskBtn=document.querySelector(".new-task-button"),newTaskPopup=document.querySelector(".new-task-popup"),overlay=document.querySelector(".overlay"),newTaskInput=document.getElementById("new-task");newTaskBtn.addEventListener("click",event=>{event.preventDefault(),overlay.style.display="block",newTaskInput.focus(),setTimeout(()=>{newTaskPopup.classList.add("show")},10)}),document.addEventListener("click",event=>{event.target.closest(".new-task-popup")||event.target===newTaskBtn||(newTaskPopup.classList.remove("show"),overlay.style.display="none")});const submitBtn=document.getElementById("submit-btn");function addTask(){const newTaskInputValue=newTaskInput.value.trim();if(""!==newTaskInputValue){const task={id:`task${Date.now()}`,name:newTaskInputValue,checked:!1};tasks.push(task),tasksList.appendChild(createTaskElement(task)),saveTasksToLocalStorage(),newTaskInput.value="",newTaskPopup.classList.remove("show"),overlay.style.display="none"}else alert("Please enter a task!")}function createTaskElement(task){const taskContainer=document.createElement("div");taskContainer.classList.add("task-container"),taskContainer.dataset.taskId=task.id,taskContainer.innerHTML=`\n            <input type="checkbox" name="To-do" id="${task.id}" class="customCheckbox" ${task.checked?"checked":""}>\n            <label for="${task.id}" class="task-box">${task.name}</label>\n            <div class="task-delete delete-btn">\n                delete\n            </div>\n        `;const checkbox=taskContainer.querySelector('input[type="checkbox"]');return checkbox.addEventListener("change",()=>{task.checked=checkbox.checked,saveTasksToLocalStorage(),checkbox.checked?taskContainer.querySelector(".task-box").classList.add("checked"):taskContainer.querySelector(".task-box").classList.remove("checked")}),taskContainer}function saveTasksToLocalStorage(){localStorage.setItem("tasks",JSON.stringify(tasks))}submitBtn.addEventListener("click",addTask),newTaskInput.addEventListener("keydown",event=>{"Enter"===event.key&&addTask()});const existingCheckboxes=document.querySelectorAll('.task-container input[type="checkbox"]');existingCheckboxes.forEach(checkbox=>{checkbox.addEventListener("change",()=>{const taskBox=checkbox.nextElementSibling;checkbox.checked?taskBox.classList.add("checked"):taskBox.classList.remove("checked");const taskId=checkbox.parentElement.dataset.taskId,taskIndex=tasks.findIndex(task=>task.id===taskId);-1!==taskIndex&&(tasks[taskIndex].checked=checkbox.checked,saveTasksToLocalStorage())})})});